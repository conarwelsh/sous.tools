layout {
    default_tab_template {
        pane size=1 borderless=true {
            plugin location="zellij:tab-bar"
        }
        children
        pane size=1 borderless=true {
            plugin location="zellij:status-bar"
        }
    }
    tab name="God View" focus=true {
        pane command="tail" {
            args "-f" "/home/conar/.sous/logs/combined.log"
        }
    }
    tab name="Core Services" {
        pane split_direction="vertical" {
            pane name="API" command="bash" {
                args "-c" "while true; do pnpm --filter @sous/api run dev 2>&1 | tee -a ~/.sous/logs/combined.log; echo 'Press any key to restart...'; read -n 1; done"
            }
            pane name="Web" command="bash" {
                args "-c" "while true; do pnpm --filter @sous/web run dev 2>&1 | tee -a ~/.sous/logs/combined.log; echo 'Press any key to restart...'; read -n 1; done"
            }
        }
        pane split_direction="vertical" {
            pane name="Docs" command="bash" {
                args "-c" "while true; do pnpm --filter @sous/docs run dev 2>&1 | tee -a ~/.sous/logs/combined.log; echo 'Press any key to restart...'; read -n 1; done"
            }
            pane name="CLI" command="bash" {
                args "-c" "while true; do pnpm --filter @sous/cli run start 2>&1 | tee -a ~/.sous/logs/combined.log; echo 'Press any key to restart...'; read -n 1; done"
            }
        }
    }
    tab name="Native Apps" {
        pane split_direction="vertical" {
            pane name="Native" command="bash" {
                args "-c" "echo 'To start Android: pnpm --filter @sous/native run android:dev'; while true; do sleep 60; done"
            }
            pane name="Headless" command="bash" {
                args "-c" "echo 'To start Android: pnpm --filter @sous/native-headless run android:dev'; while true; do sleep 60; done"
            }
        }
        pane split_direction="vertical" {
            pane name="KDS" command="bash" {
                args "-c" "echo 'To start Android: pnpm --filter @sous/native-kds run android:dev'; while true; do sleep 60; done"
            }
            pane name="POS" command="bash" {
                args "-c" "echo 'To start Android: pnpm --filter @sous/native-pos run android:dev'; while true; do sleep 60; done"
            }
        }
    }
}
